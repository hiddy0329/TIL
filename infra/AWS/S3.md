# AWS S3（Amazon Simple Storage Service）概要メモ

## 1. S3とは

Amazon S3（Simple Storage Service）は、AWSが提供する**クラウド型オブジェクトストレージサービス**です。
インターネット経由で、画像・動画・ログ・バックアップファイルなどのデータを**高耐久・高可用で安全に保存・管理**できます。

主な特徴は以下のとおりです。

* 容量無制限でデータを保存可能
* 99.999999999%（イレブンナイン）の耐久性
* 従量課金制（使った分だけ支払う）
* API・CLI・管理コンソールから操作可能
* 他AWSサービスとの高い連携性

S3は「ファイルサーバー」ではなく、**オブジェクト単位で管理するストレージ**である点が特徴です。

---

## 2. S3が提供する主な機能

### 2.1 コンテンツ配信

S3は、Webコンテンツや静的ファイルの配信基盤として利用できます。

#### 静的Webホスティング

S3では、HTML・CSS・画像などを配置することで、**静的Webサイトを公開**できます。

* 独自ドメイン対応可能
* HTTPS対応（CloudFront併用）
* サーバー管理不要

例：

* コーポレートサイト
* ランディングページ
* ドキュメントサイト

#### CloudFrontとの連携（CDN）

S3をオリジンとしてCloudFrontを利用すると、**高速・安定した配信**が可能です。

* 世界中のエッジ拠点から配信
* キャッシュによる負荷軽減
* DDoS対策強化

よくある構成：

```
ユーザー → CloudFront → S3
```

---

### 2.2 アクセス制御

S3では、複数の仕組みを組み合わせて細かいアクセス制御が可能です。

#### IAMポリシー

IAMユーザー・ロール単位でアクセス権限を制御します。

例：

* 読み取り専用
* 特定バケットのみ許可
* 特定操作のみ許可

#### バケットポリシー

バケット単位でポリシーを設定できます。

* IP制限
* 特定AWSアカウントのみ許可
* CloudFront経由のみ許可

#### ACL（Access Control List）

オブジェクト単位で権限を設定できます（現在は利用非推奨傾向）。

#### 署名付きURL（Presigned URL）

一定時間だけ有効なURLを発行し、限定公開が可能です。

用途例：

* 会員限定ダウンロード
* 一時的なファイル共有

---

### 2.3 イベント通知

S3では、オブジェクト操作をトリガーとして他サービスと連携できます。

#### 対応イベント例

* ファイルアップロード（PUT）
* 削除（DELETE）
* コピー（COPY）

#### 連携先サービス

| 連携先    | 用途例      |
| ------ | -------- |
| Lambda | 自動処理・変換  |
| SQS    | 非同期キュー処理 |
| SNS    | 通知・連携    |

#### 活用例

* 画像アップロード → 自動リサイズ
* CSV登録 → バッチ処理開始
* ログ保存 → 分析開始

構成イメージ：

```
S3 → イベント → Lambda → 処理
```

---

## 3. S3を使ったよくある設計パターン

### 3.1 静的Webサイト配信パターン

#### 構成

```
ユーザー → CloudFront → S3
```

#### 特徴

* サーバーレス構成
* 運用コストが低い
* 高可用・高耐久

#### 主な用途

* LP
* 技術ブログ
* 製品サイト

---

### 3.2 バックアップ・アーカイブ保管パターン

#### 構成

```
業務システム → S3 → Glacier
```

#### 特徴

* 長期保存向け
* 低コスト
* ライフサイクル管理で自動移行

#### 活用例

* DBバックアップ
* ログ保存
* 監査データ保管

---

### 3.3 ファイルアップロード基盤パターン

#### 構成

```
ブラウザ → S3（Presigned URL）
            ↓
         Lambda
```

#### 特徴

* アプリサーバー負荷軽減
* 大容量対応
* 高速アップロード

#### 活用例

* ユーザー画像投稿
* 動画アップロード
* 添付ファイル管理

---

### 3.4 データレイク基盤パターン

#### 構成

```
各種システム → S3 → Athena / Glue / Redshift
```

#### 特徴

* 生データを一元管理
* 分析基盤と連携
* 拡張性が高い

#### 活用例

* ログ分析
* BI基盤
* 機械学習用データ管理

---

### 3.5 アプリケーション連携ストレージパターン

#### 構成

```
EC2 / ECS / Lambda → S3
```

#### 特徴

* 共有ストレージとして活用
* 可用性が高い
* スケール容易

#### 活用例

* 帳票PDF保存
* 画像管理
* 生成ファイル保管

---

## 補足：S3設計時の基本注意点

* 原則「公開しない」設定をデフォルトにする
* CloudFront経由アクセスを推奨
* 暗号化（SSE-S3 / SSE-KMS）を有効化
* バージョニングの活用
* ライフサイクル設定でコスト最適化
